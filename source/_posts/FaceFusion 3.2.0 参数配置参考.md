---
title: FaceFusion 3.2.0 å‚æ•°é…ç½®å‚è€ƒ
date: 2025-12-20 10:32:13
tags: ai
categories: pythonåŠ æ²¹é¸­
---

<!--more-->

# **FaceFusion 3.2.0 å‚æ•°é…ç½®å‚è€ƒ**

## ğŸ§© PROCESSORSï¼ˆå¤„ç†å™¨æ¨¡å—ï¼‰

è¿™æ˜¯æ¢è„¸æµç¨‹ä¸­ä¸åŒé˜¶æ®µçš„å¤„ç†å™¨ï¼Œå¯å•ç‹¬å¼€å¯æˆ–ç»„åˆä½¿ç”¨ï¼š

| æ¨¡å—åç§°              | åŠŸèƒ½è¯´æ˜                                                |
| --------------------- | ------------------------------------------------------- |
| `face_swapper`        | æ ¸å¿ƒæ¢è„¸åŠŸèƒ½ï¼ŒåŸºäºæ¨¡å‹å¦‚ `inswapper_128` å®ç°äººè„¸æ›¿æ¢ã€‚ |
| `frame_enhancer`      | è§†é¢‘å¸§æ•´ä½“æ¸…æ™°åº¦å¢å¼ºï¼ˆè¶…åˆ†è¾¨ç‡ï¼‰ã€‚                      |
| `face_enhancer`       | é¢éƒ¨åŒºåŸŸç»†èŠ‚å¢å¼ºï¼ˆå¦‚çœ¼ç›ã€çš®è‚¤ï¼‰ã€‚                      |
| `expression_restorer` | è¡¨æƒ…è¿˜åŸæ¨¡å—ï¼Œä¿®å¤æ¢è„¸åé¢éƒ¨è¡¨æƒ…å‘†æ»çš„é—®é¢˜ã€‚            |
| `age_modifier`        | æ”¹å˜äººç‰©å¹´é¾„æ„Ÿï¼ˆå¹´è½»åŒ–æˆ–è€åŒ–ï¼‰ã€‚                        |
| `deep_swapper`        | æ›¿ä»£å‹æ·±åº¦æ¢è„¸æ¨¡å‹ï¼ˆéé»˜è®¤å¼€å¯ï¼‰ã€‚                      |
| `face_debugger`       | æ˜¾ç¤ºäººè„¸å…³é”®ç‚¹æ£€æµ‹ç»“æœï¼Œç”¨äºè°ƒè¯•ã€‚                      |
| `face_editor`         | ç¼–è¾‘é¢éƒ¨ç‰¹å¾ï¼Œå¦‚çœ¼ç›å¤§å°ã€å˜´å·´å½¢çŠ¶ç­‰ï¼ˆå¦‚æœæ”¯æŒï¼‰ã€‚      |
| `frame_colorizer`     | ç»™é»‘ç™½è§†é¢‘æˆ–å›¾åƒä¸Šè‰²ã€‚                                  |
| `lip_syncer`          | å˜´å‹åŒæ­¥ï¼Œç”¨äºè¯­éŸ³é©±åŠ¨çš„è§†é¢‘æ¢è„¸ï¼ˆå¦‚ Talking Headï¼‰ã€‚   |

---

## ğŸ§  å…³é”®æ¨¡å—å‚æ•°è¯´æ˜

### ğŸ­ Expression Restorer

-   **MODEL**: `live_portrait`

    -   è¡¨æƒ…è¿˜åŸæ¨¡å‹ï¼ˆå¦‚ Live Portraitï¼‰

-   **FACTOR**: `80`

    -   å¼ºåº¦ç³»æ•°ï¼ˆ0\~100ï¼‰ï¼Œæ•°å€¼è¶Šé«˜è¡¨æƒ…è¶Šä¸°å¯Œï¼Œä½†ä¹Ÿæ›´å®¹æ˜“å¤±çœŸã€‚

### ğŸ’ Face Enhancer

-   **MODEL**: `gfpgan_1.4`

    -   ä½¿ç”¨ GFPGAN v1.4 æ¨¡å‹å¢å¼ºé¢éƒ¨ç»†èŠ‚ï¼ˆå¦‚çœ¼ç›ã€çš®è‚¤è´¨æ„Ÿç­‰ï¼‰ã€‚

-   **BLEND**: `80`

    -   ä¸åŸå›¾æ··åˆç¨‹åº¦ï¼ˆ0\~100ï¼‰ï¼Œè¶Šé«˜å¢å¼ºè¶Šæ˜æ˜¾ã€‚

### ğŸ”„ Face Swapper

-   **MODEL**: `inswapper_128`

    -   æœ€å¸¸ç”¨ä¸”æ•ˆæœè¾ƒç¨³çš„æ¢è„¸æ¨¡å‹ï¼Œæ¨èç”¨äºäººè„¸å¯¹é½è‰¯å¥½çš„ç´ æã€‚

-   **PIXEL BOOST**: `512x512`

    -   å¢å¼ºè¾“å…¥å›¾åƒåˆ°è¯¥å°ºå¯¸è¿›è¡Œå¤„ç†ï¼Œæ•°å€¼è¶Šé«˜è¶Šæ¸…æ™°ï¼Œä½†æ˜¾å­˜å ç”¨è¶Šå¤§ã€‚

### ğŸ–¼ Frame Enhancer

-   **MODEL**: `span_kendata_x4`

    -   è¶…åˆ†è¾¨ç‡æ¨¡å‹ï¼ˆå¦‚ kendataã€Real-ESRGAN ç­‰ï¼‰ï¼Œæå‡å›¾åƒæ¸…æ™°åº¦ã€‚

-   **BLEND**: `80`

    -   åŒæ ·æ˜¯å¢å¼ºæ··åˆå¼ºåº¦ã€‚

---

## âš™ï¸ æ‰§è¡Œé…ç½®ï¼ˆæ€§èƒ½æ§åˆ¶ï¼‰

-   **EXECUTION PROVIDERS**: `cuda`, `tensorrt`, `cpu`

    -   ä¼˜å…ˆä½¿ç”¨çš„è®¡ç®—åç«¯ï¼Œæ¨èé¡ºåºï¼š`tensorrt > cuda > cpu`ï¼ˆå¦‚æ”¯æŒï¼‰ã€‚

-   **THREAD COUNT**: `16`

    -   å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°ã€‚

-   **QUEUE COUNT**: `1`

    -   ä»»åŠ¡é˜Ÿåˆ—æ•°é‡ï¼Œé€šå¸¸ä¿æŒ 1 å³å¯ã€‚

---

## ğŸ›  ä¸‹è½½ä¸è¾“å‡ºè®¾ç½®

-   **DOWNLOAD PROVIDERS**: `github`, `huggingface`

    -   é»˜è®¤ä¸‹è½½æ¨¡å‹æ—¶ä½¿ç”¨çš„æºåœ°å€ã€‚

-   **VIDEO MEMORY STRATEGY**: `tolerant`

    -   æ˜¾å­˜å®¹é”™ç­–ç•¥ï¼Œ`tolerant` è¡¨ç¤ºå‡ºç°çˆ†æ˜¾å­˜æ—¶è‡ªåŠ¨é™é…ã€‚

-   **SYSTEM MEMORY LIMIT**: `0`

    -   å ç”¨å†…å­˜ä¸Šé™ï¼ˆMBï¼‰ï¼Œ0 è¡¨ç¤ºä¸é™åˆ¶ã€‚

-   **OUTPUT IMAGE QUALITY**: `90`

    -   è¾“å‡ºå›¾åƒçš„ JPEG è´¨é‡ï¼ˆ1\~100ï¼‰ã€‚

-   **OUTPUT IMAGE RESOLUTION**: `680x1024`

    -   è¾“å‡ºå›¾åƒæˆ–è§†é¢‘å¸§çš„ç›®æ ‡å°ºå¯¸ã€‚

---

## âœ… æ¨èè®¾ç½®å»ºè®®

| ç›®æ ‡         | æ¨èå‚æ•°é…ç½®                                       |
| ------------ | -------------------------------------------------- |
| è¿½æ±‚é«˜æ¸…è´¨é‡ | enhancer blend è®¾ç½®é«˜ï¼Œè¾“å‡ºåˆ†è¾¨ç‡è®¾ä¸º 1080p ä»¥ä¸Šã€‚ |
| æ˜¾å­˜ä¸è¶³     | é™ä½ pixel boostã€output resolutionã€blend å€¼ã€‚    |
| è¡¨æƒ…è‡ªç„¶     | expression factor è®¾ä¸º 60\~80 ä¹‹é—´ã€‚               |
| è§†é¢‘è¿ç»­æ€§å¼º | é¿å…è¿‡é«˜å¢å¼ºå¼ºåº¦ï¼Œç¡®ä¿æ¯å¸§é£æ ¼ä¸€è‡´ã€‚               |

---

## ğŸ¯ æ¨èçš„æœ€ä¼˜å‚æ•°ç»„åˆï¼ˆé’ˆå¯¹é«˜è´¨é‡æ¢è„¸æ•ˆæœï¼‰

ä¸ºäº†è·å¾—æœ€ä½³çš„æ¢è„¸æ•ˆæœï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹å‚æ•°ç»„åˆï¼š

```
--processors face_swapper face_enhancer expression_restorer
```

æ­¤ç»„åˆå°†æ‰§è¡Œæ¢è„¸æ“ä½œï¼Œå¹¶å¢å¼ºé¢éƒ¨ç»†èŠ‚ï¼ŒåŒæ—¶æ¢å¤è‡ªç„¶çš„é¢éƒ¨è¡¨æƒ…ã€‚

## ğŸ“ ç¤ºä¾‹å‘½ä»¤

ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹å‘½ä»¤ï¼Œç»“åˆä¸Šè¿°å‚æ•°ä»¥å®ç°é«˜è´¨é‡çš„æ¢è„¸æ•ˆæœï¼š

```
python facefusion.py run \
  --processors face_swapper face_enhancer expression_restorer \
  --face-swapper-model inswapper_128 \
  --face-enhancer-model gfpgan_1.4 \
  --face-mask-type region \
  --face-mask-blur 0.3 \
  --face-mask-padding 10
```

æ­¤å‘½ä»¤å°†ä½¿ç”¨æŒ‡å®šçš„æ¨¡å‹å’Œè®¾ç½®ï¼Œæ‰§è¡Œæ¢è„¸ã€å¢å¼ºå’Œè¡¨æƒ…æ¢å¤æ“ä½œã€‚

> å¦ä¸€ç§æ–¹æ¡ˆæ˜¯åœ¨ `facefusion.ini` é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šå‚æ•°ï¼Œä¸ç”¨æ¯æ¬¡æ‰§è¡Œå‘½ä»¤éƒ½æ‰‹åŠ¨æŒ‡å®šå‚æ•°ã€‚

ä½¿ç”¨**æ— å¤´æ¨¡å¼**ç›´æ¥æ‰§è¡Œä»»åŠ¡

```
python facefusion.py headless-run --source-path ./facefusion/source/liuyifei.png --target-path ./facefusion/target/20250410003.jpg --output-path ./outputs/20250520004.jpg
```

## å®‰è£… coda ç¯å¢ƒæ—¶å¯èƒ½é‡åˆ°ç½‘ç»œé—®é¢˜

> æŒ‡å®šæ¸…åæºå®‰è£…

```
conda install -c https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge \
    cuda-runtime=12.8.1 cudnn=9.8.0.87
```

## å‚è€ƒå®˜æ–¹æ–‡æ¡£

å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.facefusion.io/

GitHub ä»“åº“ï¼šhttps://github.com/facefusion/facefusion
